# üï∑ Kaspi Parser

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –º–∞–≥–∞–∑–∏–Ω–æ–≤ —Å **[kaspi.kz](https://kaspi.kz)**.  
–°–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–ø–∞–Ω–∏—è—Ö –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –≥–æ—Ä–æ–¥–∞–º, –∏—Å–ø–æ–ª—å–∑—É—è **Playwright**,  
–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª **`database/companies.xlsx`**.  

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–∏–º–∏—Ç—ã –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã, –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –∏ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone <url_—Ç–≤–æ–µ–≥–æ_—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
cd parser_kaspi
python -m venv venv
source venv/bin/activate  # (–∏–ª–∏ venv\Scripts\activate –Ω–∞ Windows)
pip install -r requirements.txt
playwright install

```
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–æ–∑–¥–∞–π —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä—è–¥–æ–º —Å play.py)
–∏ —É–∫–∞–∂–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
```dotenv
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º —Å —Ç–æ–≤–∞—Ä–∞–º–∏. –ï—Å–ª–∏ –∫–æ–¥ –±—É–¥–µ—Ç –ø–∞–¥–∞—Ç—å –≤–Ω–∞—á–∞–ª–µ, —É–º–µ–Ω—å—à–∏ —ç—Ç–æ —á–∏—Å–ª–æ(–ß–∏—Å–ª–æ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã, —á—Ä–µ–≤–∞—Ç–æ –æ—à–∏–±–∫–∞–º–∏)
RATE_LIMIT_URLS=4

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ –∫–æ–º–ø–∞–Ω–∏–π. –ï—Å–ª–∏ –∫–æ–¥ –±—É–¥–µ—Ç –ø–∞–¥–∞—Ç—å –≤ –∫–æ–Ω—Ü–µ —É–º–µ–Ω—å—à–∏ —ç—Ç–æ —á–∏—Å–ª–æ(–ß–∏—Å–ª–æ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã, —á—Ä–µ–≤–∞—Ç–æ –æ—à–∏–±–∫–∞–º–∏)
RATE_LIMIT_COMPS=15

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤( –µ—Å–ª–∏ —É –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –Ω–µ —Ö–≤–∞—Ç–∞—Ç—å —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º—É - —É–º–µ–Ω—å—à–∏ —ç—Ç–æ —á–∏—Å–ª–æ)
WORKERS=10

# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ (URL –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞ kaspi.kz). –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å—Å—è –µ—â–µ –æ–¥–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è - –≤–ø–∏—Å–∞—Ç—å —Å—é–¥–∞ –≤ –≤–∏–¥–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –Ω–µ—ë –≤ —Ç–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ: ,"".
CATEGORIES=["https://kaspi.kz/shop/c/smartphones%20and%20gadgets/",
"https://kaspi.kz/shop/c/home%20equipment/",
"https://kaspi.kz/shop/c/pharmacy/",
"https://kaspi.kz/shop/c/tv_audio/",
"https://kaspi.kz/shop/c/computers/",
"https://kaspi.kz/shop/c/furniture/",
"https://kaspi.kz/shop/c/beauty%20care/",
"https://kaspi.kz/shop/c/child%20goods/"]

# –ì–æ—Ä–æ–¥–∞, –ø–æ –∫–æ—Ç–æ—Ä—ã–º —Å–æ–±–∏—Ä–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏–∏
CITIES=["–ï—Å–∏–∫"]

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–ø–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏( –∫–æ–ª–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ )
PRODUCTS=500
```
üèÉ –ó–∞–ø—É—Å–∫

–ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏:
```bash
python play.py
```
## –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

–æ—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä Chromium —á–µ—Ä–µ–∑ Playwright;

—Å–æ–±–µ—Ä—É—Ç—Å—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ –≥–æ—Ä–æ–¥–∞–º;

—Ä–∞—Å–ø–∞—Ä—Å—è—Ç—Å—è –∫–æ–º–ø–∞–Ω–∏–∏;

–≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ database/companies.xlsx;

–ª–æ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ logs/my_logs.log.

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
parser_kaspi/
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ companies.xlsx        # –∏—Ç–æ–≥–æ–≤—ã–π —Ñ–∞–π–ª —Å –∫–æ–º–ø–∞–Ω–∏—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ last.json             # –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ª–∏—Å—Ç–∞
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îî‚îÄ‚îÄ my_logs.log           # –ª–æ–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .env                      # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt          # –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ abstracts.py              # –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∫–ª–∞—Å—Å—ã
‚îú‚îÄ‚îÄ implementations.py        # —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏
‚îú‚îÄ‚îÄ config.py                 # —á—Ç–µ–Ω–∏–µ .env –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îú‚îÄ‚îÄ log.py                    # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞
‚îú‚îÄ‚îÄ play.py                   # –≥–ª–∞–≤–Ω—ã–π –∑–∞–ø—É—Å–∫–∞–µ–º—ã–π —Å–∫—Ä–∏–ø—Ç
```
üß© –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–§–∞–π–ª companies.xlsx —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç–æ–ª–±—Ü—ã:

–ö–æ–º–ø–∞–Ω–∏—è	–ì–æ—Ä–æ–¥	–¢–µ–ª–µ—Ñ–æ–Ω	–°–∞–π—Ç	–ö–∞—Ç–µ–≥–æ—Ä–∏—è